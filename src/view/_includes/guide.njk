{% extends "default.njk" %}

{% set nav %}
  {% set previousGuide = collections.guides | getPreviousCollectionItem(page) %}
  {% set nextGuide = collections.guides | getNextCollectionItem(page) %}
  
  {% set previousPost = collections.advanced | getPreviousCollectionItem(page) %}
  {% set nextPost = collections.advanced | getNextCollectionItem(page) %}

  <nav class="pagination">
    {% if previousGuide %}
      <a href="{{previousGuide.url}}">Previous: {{previousGuide.data.title}}</a>
    {% endif %}
    {% if nextGuide %}
      <a href="{{nextGuide.url}}" class="pagination__next">Next: {{nextGuide.data.title}}</a>
    {% endif %}
    
    {% if previousPost %}
      <a href="{{previousPost.url}}">Previous: {{previousPost.data.title}}</a>
    {% endif %}
    {% if nextPost %}
      <a href="{{nextPost.url}}" class="pagination__next">Next: {{nextPost.data.title}}</a>
    {% endif %}
  </nav>
{% endset %}

{% block main %}

  {% if author or contributors %}
    <p class="byline">
      {% if author %}Guide written by <strong>{{ author }}</strong>.{% endif %}
      {% if contributors %}Contributions from <strong>{{ contributors }}</strong>.{% endif %}
  {% endif %}

  {% if draft %}
    <p class="draft-warning">
      This guide is currently undergoing change.
      Keep in mind, <strong>strategies may change</strong>.
  {% endif %}

  {% if '/rankings-main' in page.url %}
    <h3>Previous Rankings</h3>
    <ul>
      {%- for post in collections.ranking | reverse -%}
        {% if not ('/rankings-main' in post.url) %}
          <li>
            <a href="{{post.url}}">{{ post.data.title }}</a>
            {% if post.data.subtitle %}
              ({{ post.data.subtitle }})
            {% endif %}
          </li>
        {% endif %}
      {%- endfor -%}
    </ul>
  {% else %}
    {{ content | safe }}
  {% endif %}
  
{% endblock %}

{% block sidebar %}
  {% if not home %}
    {% set tocs = content | toc %}
    {% if tocs %}
      <div id="HeaderSidebar" class="sidebar">
        <a href="javascript:void(0)" class="closebtn" onclick="closeSidebar()">ⓧ</a>
        <h1 class="sidebartitle">Table of Contents</h1>
        <div class="content_wrapper square_list">
          {{content|toc|safe}}
        </div>
      </div>
      <div id="HeaderSidebarinvis" class="sidebar">
        <a href="javascript:void(0)" class="closebtn" onclick="closeSidebar()">ⓧ</a>
        <h1 class="sidebartitle">Table of Contents</h1>
        <div class="content_wrapper square_list">
          {{content|toc|safe}}
        </div>
      </div>
    {% else %}
      <div id="HeaderSidebar" class="sidebar">
        <a href="javascript:void(0)" class="closebtn" onclick="closeSidebar()">ⓧ</a>
        <h1 class="sidebartitle">Table of Contents</h1>
        <div class="content_wrapper square_list">
          <p>No headers have been established.<br>Please add headers for Table of Contents.</p>
        </div>
      </div>
      <div id="HeaderSidebarinvis" class="sidebar">
        <a href="javascript:void(0)" class="closebtn" onclick="closeSidebar()">ⓧ</a>
        <h1 class="sidebartitle">Table of Contents</h1>
        <div class="content_wrapper square_list">
          <p>No headers have been established.<br>Please add headers for Table of Contents.</p>
        </div>
      </div>
    {% endif %}

    <div id="GuideSidebar" class="sidebar">
      <a href="javascript:void(0)" class="closebtn" onclick="closeSidebar()">ⓧ</a>
      <h1 class="sidebartitle">Guides</h1>
      <div class="content_wrapper square_list">
        <ul>
          {%- for guide in collections.guides -%}
            <li>
              <a href="{{guide.url}}">{{ guide.data.title }}</a>
            </li>
          {%- endfor -%}
        </ul>
      </div>
    </div>
    <div id="GuideSidebarinvis" class="sidebar">
      <a href="javascript:void(0)" class="closebtn" onclick="closeSidebar()">ⓧ</a>
      <h1 class="sidebartitle">Guides</h1>
      <div class="content_wrapper square_list">
        <ul>
          {%- for guide in collections.guides -%}
            <li>
              <a href="{{guide.url}}">{{ guide.data.title }}</a>
            </li>
          {%- endfor -%}
        </ul>
      </div>
    </div>

    <div id="ResourceSidebar" class="sidebar">
      <a href="javascript:void(0)" class="closebtn" onclick="closeSidebar()">ⓧ</a>
      <h1 class="sidebartitle">Resources</h1>
      <div class="content_wrapper square_list">
        {% include 'tools.njk' %}
      </div>
    </div>
    <div id="ResourceSidebarinvis" class="sidebar">
      <a href="javascript:void(0)" class="closebtn" onclick="closeSidebar()">ⓧ</a>
      <h1 class="sidebartitle">Resources</h1>
      <div class="content_wrapper square_list">
        {% include 'tools.njk' %}
      </div>
    </div>
    
    <div id="ExtensionsSidebar" class="sidebar">
      <a href="javascript:void(0)" class="closebtn" onclick="closeSidebar()">ⓧ</a>
      <h1 class="sidebartitle">Guide Extensions</h1>
      <div class="content_wrapper square_list">
        <ul>
          {%- for post in collections.advanced -%}
            <li>
              <a href="{{post.url}}">{{ post.data.title }}</a>
            </li>
          {%- endfor -%}
        </ul>
      </div>
    </div>
    <div id="ExtensionsSidebarinvis" class="sidebar">
      <a href="javascript:void(0)" class="closebtn" onclick="closeSidebar()">ⓧ</a>
      <h1 class="sidebartitle">Guide Extensions</h1>
      <div class="content_wrapper square_list">
        <ul>
          {%- for post in collections.advanced -%}
            <li>
              <a href="{{post.url}}">{{ post.data.title }}</a>
            </li>
          {%- endfor -%}
        </ul>
      </div>
    </div>
    
    <div id="SidebarHeaders" class="sidebar">
      <h1 class="sidebartitle">More Guides ⓧ</h1>
      <h1 class="sidebartitle">Table of Contents ⓧ</h1>
      <h1 class="sidebartitle">Other Resources ⓧ</h1>
      <h1 class="sidebartitle">Guide Extensions ⓧ</h1>
    </div>

    <div id="sidebarmain">
      <div>
        <button class="openbtn" onclick="openSidebar(['GuideSidebar','HeaderSidebar','ResourceSidebar','ExtensionsSidebar'],'SidebarHeaders')">☰More Guides</button>
      </div>
      <div>
        <button class="openbtn" onclick="openSidebar(['HeaderSidebar','GuideSidebar','ResourceSidebar','ExtensionsSidebar'],'SidebarHeaders')">☰Table of <span style="display:inline-block;">Contents</span></button>
      </div>
      <div>
        <button class="openbtn" onclick="openSidebar(['ResourceSidebar','GuideSidebar','HeaderSidebar','ExtensionsSidebar'],'SidebarHeaders')">☰Other Resources</button>
      </div>
      <div>
        <button class="openbtn" onclick="openSidebar(['ExtensionsSidebar','ResourceSidebar','GuideSidebar','HeaderSidebar'],'SidebarHeaders')">☰Extensions</button>
      </div>
    </div>
  {% endif %}
{% endblock %}