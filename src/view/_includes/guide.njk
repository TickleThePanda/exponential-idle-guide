{% extends "default.njk" %}

{% set nav %}

  {% set guides = collections["guide_" + locale] | sortByOrder %}

  {% set previousGuide = guides | getPreviousCollectionItem(page) %}
  {% set nextGuide = guides | getNextCollectionItem(page) %}

  <nav class="pagination">
    {% if previousGuide %}
      <a href="{{previousGuide.url}}">{{ guide[locale].previous }}: {{previousGuide.data.title}}</a>
    {% endif %}
    {% if nextGuide %}
      <a href="{{nextGuide.url}}" class="pagination__next">{{ guide[locale].next }}: {{nextGuide.data.title}}</a>
    {% endif %}
  </nav>
{% endset %}

{% block main %}

  {% if author or contributors %}
    <p class="byline">
      {% if author %}{{ guide[locale].author }} <strong>{{ author }}</strong>.{% endif %}
      {% if translators %}{{ guide[locale].translators }} <strong>{{ translators }}</strong>.{% endif %}
      {% if contributors %}{{ guide[locale].contributors }} <strong>{{ contributors }}</strong>.{% endif %}
  {% endif %}

  {% if draft %}
    <p class="draft-warning">
      {{ guide[locale].draftWarning }}
  {% endif %}

  {% set toc = content | toc %}

  {% if toc %}
  <div class="toc-wrapper">
    <h3>{{ guide[locale].toc }}</h3>
    {{ toc | safe }}
  </div>
  {% endif %}

  {{ content | safe }}
{% endblock %}
